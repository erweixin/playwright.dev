"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[7603],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return d}});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),i=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=i(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,l=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=i(a),d=o,y=m["".concat(c,".").concat(d)]||m[d]||u[d]||l;return a?n.createElement(y,r(r({ref:t},p),{},{components:a})):n.createElement(y,r({ref:t},p))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=a.length,r=new Array(l);r[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var i=2;i<l;i++)r[i]=a[i];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4455:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(7294),o=a(6010),l="tabItem_Ymn6",r=Object.defineProperty,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function u({children:e,hidden:t,className:a}){return n.createElement("div",((e,t)=>{for(var a in t||(t={}))c.call(t,a)&&p(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&p(e,a,t[a]);return e})({role:"tabpanel",className:(0,o.Z)(l,a)},{hidden:t}),e)}},5332:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(7294),o=a(6010),l=a(4939),r=a(2174),s=a(2107),c=a(8757),i="tabList__CuJ",p="tabItem_LNqP",u=Object.defineProperty,m=Object.defineProperties,d=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))h.call(t,a)&&g(e,a,t[a]);if(y)for(var a of y(t))b.call(t,a)&&g(e,a,t[a]);return e};function v(e){var t,a;const{lazy:l,block:u,defaultValue:y,values:h,groupId:b,className:g}=e,v=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=null!=h?h:v.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),w=(0,r.l)(k,((e,t)=>e.value===t.value));if(w.length>0)throw new Error(`Docusaurus error: Duplicate values "${w.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const x=null===y?y:null!=(a=null!=y?y:null==(t=v.find((e=>e.props.default)))?void 0:t.props.value)?a:v[0].props.value;if(null!==x&&!k.some((e=>e.value===x)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${x}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:T,setTabGroupChoices:N}=(0,s.U)(),[O,I]=(0,n.useState)(x),S=[],{blockElementScrollPositionUntilNextRender:P}=(0,c.o5)();if(null!=b){const e=T[b];null!=e&&e!==O&&k.some((t=>t.value===e))&&I(e)}const Z=e=>{const t=e.currentTarget,a=S.indexOf(t),n=k[a].value;n!==O&&(P(t),I(n),null!=b&&N(b,String(n)))},j=e=>{var t,a;let n=null;switch(e.key){case"ArrowRight":{const a=S.indexOf(e.currentTarget)+1;n=null!=(t=S[a])?t:S[0];break}case"ArrowLeft":{const t=S.indexOf(e.currentTarget)-1;n=null!=(a=S[t])?a:S[S.length-1];break}}null==n||n.focus()};return n.createElement("div",{className:(0,o.Z)("tabs-container",i)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":u},g)},k.map((({value:e,label:t,attributes:a})=>{return n.createElement("li",(l=f({role:"tab",tabIndex:O===e?0:-1,"aria-selected":O===e,key:e,ref:e=>S.push(e),onKeyDown:j,onFocus:Z,onClick:Z},a),r={className:(0,o.Z)("tabs__item",p,null==a?void 0:a.className,{"tabs__item--active":O===e})},m(l,d(r))),null!=t?t:e);var l,r}))),l?(0,n.cloneElement)(v.filter((e=>e.props.value===O))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},v.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==O})))))}function k(e){const t=(0,l.Z)();return n.createElement(v,f({key:String(t)},e))}},4113:function(e,t,a){a.r(t),a.d(t,{assets:function(){return g},contentTitle:function(){return h},default:function(){return k},frontMatter:function(){return y},metadata:function(){return b},toc:function(){return f}});var n=a(3905),o=a(5332),l=a(4455),r=Object.defineProperty,s=Object.defineProperties,c=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&m(e,a,t[a]);if(i)for(var a of i(t))u.call(t,a)&&m(e,a,t[a]);return e};const y={id:"locators",title:"Locators"},h=void 0,b={unversionedId:"locators",id:"version-stable/locators",title:"Locators",description:"Locator]s are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment. Locator can be created with the [page.locator(selector, kwargs) method.",source:"@site/versioned_docs/version-stable/locators.mdx",sourceDirName:".",slug:"/locators",permalink:"/python/docs/locators",draft:!1,tags:[],version:"stable",frontMatter:{id:"locators",title:"Locators"},sidebar:"docs",previous:{title:"Input",permalink:"/python/docs/input"},next:{title:"Navigations",permalink:"/python/docs/navigations"}},g={},f=[{value:"Creating Locators",id:"creating-locators",level:2},{value:"Strictness",id:"strictness",level:2},{value:"Lists",id:"lists",level:2},{value:"Filtering Locators",id:"filtering-locators",level:2},{value:"Locator vs ElementHandle",id:"locator-vs-elementhandle",level:2}],v={toc:f};function k(e){var t,a=e,{components:r}=a,m=((e,t)=>{var a={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&i)for(var n of i(e))t.indexOf(n)<0&&u.call(e,n)&&(a[n]=e[n]);return a})(a,["components"]);return(0,n.kt)("wrapper",(t=d(d({},v),m),s(t,c({components:r,mdxType:"MDXLayout"}))),(0,n.kt)("p",null,(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator",title:"Locator"}),"Locator"),"s are the central piece of Playwright's auto-waiting and retry-ability. In a nutshell, locators represent a way to find element(s) on the page at any moment. Locator can be created with the ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-page#page-locator"}),"page.locator(selector, **kwargs)")," method."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nlocator.click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nawait locator.click()\n')))),(0,n.kt)("p",null,"Every time locator is used for some action, up-to-date DOM element is located in the page. So in the snippet below, underlying DOM element is going to be located twice, prior to every action. This means that if the DOM changes in between the calls due to re-render, the new element corresponding to the locator will be used."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nlocator.hover()\nlocator.click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nawait locator.hover()\nawait locator.click()\n')))),(0,n.kt)("h2",d({},{id:"creating-locators"}),"Creating Locators"),(0,n.kt)("p",null,"Use ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-page#page-locator"}),"page.locator(selector, **kwargs)")," method to create a locator. This method takes a selector that describes how to find an element in the page. Playwright supports many different selectors like ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/selectors#text-selector"}),"Text"),", ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/selectors#css-selector"}),"CSS"),", ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/selectors#xpath-selectors"}),"XPath")," and many more. Learn more about available selectors and how to pick one in this ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/selectors"}),"in-depth guide"),"."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'# Find by text.\npage.locator("text=Sign up").click()\n\n# Find by CSS.\npage.locator("button.sign-up").click()\n\n# Find by test id.\npage.locator("data-testid=sign-up").click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'# Find by text.\nawait page.locator("text=Sign up").click()\n\n# Find by CSS.\nawait page.locator("button.sign-up").click()\n\n# Find by test id.\nawait page.locator("data-testid=sign-up").click()\n')))),(0,n.kt)("h2",d({},{id:"strictness"}),"Strictness"),(0,n.kt)("p",null,"Locators are strict. This means that all operations on locators that imply some target DOM element will throw an exception if more than one element matches given selector."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),"# Throws if there are several buttons in DOM:\npage.locator('button').click()\n\n# Works because we explicitly tell locator to pick the first element:\npage.locator('button').first.click() # \u26a0\ufe0f using first disables strictness\n\n# Works because count knows what to do with multiple matches:\npage.locator('button').count()\n"))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),"# Throws if there are several buttons in DOM:\nawait page.locator('button').click()\n\n# Works because we explicitly tell locator to pick the first element:\nawait page.locator('button').first.click() # \u26a0\ufe0f using first disables strictness\n\n# Works because count knows what to do with multiple matches:\nawait page.locator('button').count()\n")))),(0,n.kt)("admonition",d({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"Using ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator#locator-first"}),"locator.first"),", ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator#locator-last"}),"locator.last"),", and ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator#locator-nth"}),"locator.nth(index)")," is discouraged since it disables the concept of strictness, and as your page changes, Playwright may click on an element you did not intend. It's better to make your locator more specific. Learn more below in ",(0,n.kt)("a",d({parentName:"p"},{href:"#filtering-locators"}),"Filtering Locators")," and the ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/selectors"}),"selectors guide"),".")),(0,n.kt)("h2",d({},{id:"lists"}),"Lists"),(0,n.kt)("p",null,"You can also use locators to work with the element lists."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'# Locate elements, this locator points to a list.\nrows = page.locator("table tr")\n\n# Pattern 1: use locator methods to calculate text on the whole list.\ntexts = rows.all_text_contents()\n\n# Pattern 2: do something with each element in the list.\ncount = rows.count()\nfor i in range(count):\n  print(rows.nth(i).text_content())\n\n# Pattern 3: resolve locator to elements on page and map them to their text content.\n# Note: the code inside evaluateAll runs in page, you can call any DOM apis there.\ntexts = rows.evaluate_all("list => list.map(element => element.textContent)")\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'# Locate elements, this locator points to a list.\nrows = page.locator("table tr")\n\n# Pattern 1: use locator methods to calculate text on the whole list.\ntexts = await rows.all_text_contents()\n\n# Pattern 2: do something with each element in the list.\ncount = await rows.count()\nfor i in range(count):\n  print(await rows.nth(i).text_content())\n\n# Pattern 3: resolve locator to elements on page and map them to their text content.\n# Note: the code inside evaluateAll runs in page, you can call any DOM apis there.\ntexts = await rows.evaluate_all("list => list.map(element => element.textContent)")\n')))),(0,n.kt)("h2",d({},{id:"filtering-locators"}),"Filtering Locators"),(0,n.kt)("p",null,"When creating a locator, you can pass additional options to filter it."),(0,n.kt)("p",null,"Filtering by text will search for a particular string somewhere inside the element, possibly in a descendant element, case-insensitively. You can also pass a regular expression."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'page.locator("button", has_text="Sign up").click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'await page.locator("button", has_text="Sign up").click()\n')))),(0,n.kt)("p",null,"Locators also support an option to only select elements that have a descendant matching another locator. Note that inner locator is matched starting from the outer one, not from the document root."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'page.locator("article", has=page.locator("button.subscribe"))\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'page.locator("article", has=page.locator("button.subscribe"))\n')))),(0,n.kt)("p",null,"You can also filter an existing locator with ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator#locator-filter"}),"locator.filter(**kwargs)")," method, possibly chaining it multiple times."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'row_locator = page.lsocator("tr")\n# ...\nrow_locator\n    .filter(has_text="text in column 1")\n    .filter(has=page.locator("tr", has_text="column 2 button"))\n    .screenshot()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'row_locator = page.lsocator("tr")\n# ...\nawait row_locator\n    .filter(has_text="text in column 1")\n    .filter(has=page.locator("tr", has_text="column 2 button"))\n    .screenshot()\n')))),(0,n.kt)("h2",d({},{id:"locator-vs-elementhandle"}),"Locator vs ElementHandle"),(0,n.kt)("admonition",d({},{type:"caution"}),(0,n.kt)("p",{parentName:"admonition"},"We only recommend using ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-elementhandle",title:"ElementHandle"}),"ElementHandle")," in the rare cases when you need to perform extensive DOM traversal on a static page. For all user actions and assertions use locator instead.")),(0,n.kt)("p",null,"The difference between the ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-locator",title:"Locator"}),"Locator")," and ",(0,n.kt)("a",d({parentName:"p"},{href:"/python/docs/api/class-elementhandle",title:"ElementHandle"}),"ElementHandle")," is that the latter points to a particular element, while Locator captures the logic of how to retrieve that element."),(0,n.kt)("p",null,"In the example below, handle points to a particular DOM element on page. If that element changes text or is used by React to render an entirely different component, handle is still pointing to that very stale DOM element. This can lead to unexpected behaviors."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'handle = page.query_selector("text=Submit")\nhandle.hover()\nhandle.click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'handle = await page.query_selector("text=Submit")\nawait handle.hover()\nawait handle.click()\n')))),(0,n.kt)("p",null,"With the locator, every time the locator is used, up-to-date DOM element is located in the page using the selector. So in the snippet below, underlying DOM element is going to be located twice."),(0,n.kt)(o.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nlocator.hover()\nlocator.click()\n'))),(0,n.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",d({parentName:"pre"},{className:"language-py"}),'locator = page.locator("text=Submit")\nawait locator.hover()\nawait locator.click()\n')))))}k.isMDXComponent=!0}}]);