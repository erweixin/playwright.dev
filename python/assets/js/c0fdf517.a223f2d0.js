"use strict";(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[9315],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),g=r,h=d["".concat(s,".").concat(g)]||d[g]||p[g]||o;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4455:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(7294),r=n(6010),o="tabItem_Ymn6",l=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function p({children:e,hidden:t,className:n}){return a.createElement("div",((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&u(e,n,t[n]);if(i)for(var n of i(t))c.call(t,n)&&u(e,n,t[n]);return e})({role:"tabpanel",className:(0,r.Z)(o,n)},{hidden:t}),e)}},5332:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(7294),r=n(6010),o=n(4939),l=n(2174),i=n(2107),s=n(8757),c="tabList__CuJ",u="tabItem_LNqP",p=Object.defineProperty,d=Object.defineProperties,g=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&b(e,n,t[n]);if(h)for(var n of h(t))w.call(t,n)&&b(e,n,t[n]);return e};function y(e){var t,n;const{lazy:o,block:p,defaultValue:h,values:m,groupId:w,className:b}=e,y=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),v=null!=m?m:y.map((({props:{value:e,label:t,attributes:n}})=>({value:e,label:t,attributes:n}))),k=(0,l.l)(v,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const N=null===h?h:null!=(n=null!=h?h:null==(t=y.find((e=>e.props.default)))?void 0:t.props.value)?n:y[0].props.value;if(null!==N&&!v.some((e=>e.value===N)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${N}" but none of its children has the corresponding value. Available values are: ${v.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:O,setTabGroupChoices:x}=(0,i.U)(),[P,j]=(0,a.useState)(N),T=[],{blockElementScrollPositionUntilNextRender:E}=(0,s.o5)();if(null!=w){const e=O[w];null!=e&&e!==P&&v.some((t=>t.value===e))&&j(e)}const C=e=>{const t=e.currentTarget,n=T.indexOf(t),a=v[n].value;a!==P&&(E(t),j(a),null!=w&&x(w,String(a)))},I=e=>{var t,n;let a=null;switch(e.key){case"ArrowRight":{const n=T.indexOf(e.currentTarget)+1;a=null!=(t=T[n])?t:T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=null!=(n=T[t])?n:T[T.length-1];break}}null==a||a.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":p},b)},v.map((({value:e,label:t,attributes:n})=>{return a.createElement("li",(o=f({role:"tab",tabIndex:P===e?0:-1,"aria-selected":P===e,key:e,ref:e=>T.push(e),onKeyDown:I,onFocus:C,onClick:C},n),l={className:(0,r.Z)("tabs__item",u,null==n?void 0:n.className,{"tabs__item--active":P===e})},d(o,g(l))),null!=t?t:e);var o,l}))),o?(0,a.cloneElement)(y.filter((e=>e.props.value===P))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},y.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==P})))))}function v(e){const t=(0,o.Z)();return a.createElement(y,f({key:String(t)},e))}},780:function(e,t,n){n.r(t),n.d(t,{assets:function(){return b},contentTitle:function(){return m},default:function(){return v},frontMatter:function(){return h},metadata:function(){return w},toc:function(){return f}});var a=n(3905),r=n(5332),o=n(4455),l=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&d(e,n,t[n]);if(c)for(var n of c(t))p.call(t,n)&&d(e,n,t[n]);return e};const h={id:"codegen",title:"Test Generator"},m=void 0,w={unversionedId:"codegen",id:"codegen",title:"Test Generator",description:"Playwright comes with the ability to generate tests out of the box and is a great way to quickly get started with testing. It will open two windows, a browser window where you interact with the website you wish to test and the Playwright Inspector window where you can record your tests, copy the tests, clear your tests as well as change the language of your tests.",source:"@site/docs/codegen.mdx",sourceDirName:".",slug:"/codegen",permalink:"/python/docs/next/codegen",draft:!1,tags:[],version:"current",frontMatter:{id:"codegen",title:"Test Generator"},sidebar:"docs",previous:{title:"Running Tests",permalink:"/python/docs/next/running-tests"},next:{title:"Trace Viewer",permalink:"/python/docs/next/trace-viewer"}},b={},f=[{value:"Emulate viewport size",id:"emulate-viewport-size",level:2},{value:"Emulate devices",id:"emulate-devices",level:2},{value:"Emulate color scheme",id:"emulate-color-scheme",level:2},{value:"Emulate geolocation, language and timezone",id:"emulate-geolocation-language-and-timezone",level:2},{value:"Preserve authenticated state",id:"preserve-authenticated-state",level:2},{value:"Record using custom setup",id:"record-using-custom-setup",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}],y={toc:f};function v(e){var t,n=e,{components:l}=n,d=((e,t)=>{var n={};for(var a in e)u.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&c)for(var a of c(e))t.indexOf(a)<0&&p.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=g(g({},y),d),i(t,s({components:l,mdxType:"MDXLayout"}))),(0,a.kt)("p",null,"Playwright comes with the ability to generate tests out of the box and is a great way to quickly get started with testing. It will open two windows, a browser window where you interact with the website you wish to test and the Playwright Inspector window where you can record your tests, copy the tests, clear your tests as well as change the language of your tests."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright codegen playwright.dev\n")),(0,a.kt)("p",null,"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"codegen")," and perform actions in the browser. Playwright will generate the code for the user interactions. ",(0,a.kt)("inlineCode",{parentName:"p"},"codegen")," will attempt to generate resilient text-based selectors."),(0,a.kt)("img",{width:"1183",alt:"Codegen generating code for tests for playwright.dev website",src:"https://user-images.githubusercontent.com/13063165/181852815-971c10da-0b55-4e54-8a73-77e1e825193c.png"}),(0,a.kt)("h2",g({},{id:"emulate-viewport-size"}),"Emulate viewport size"),(0,a.kt)("p",null,"Playwright opens a browser window with it's viewport set to a specific width and height and is not responsive as tests need to be run under the same conditions. Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"--viewport")," option to generate tests with a different viewport size."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright codegen --viewport-size=800,600 playwright.dev\n")),(0,a.kt)("img",{width:"1409",alt:"Codegen generating code for tests for playwright.dev website with a specific viewport",src:"https://user-images.githubusercontent.com/13063165/182360039-6db79ad6-fe82-4fd6-900a-b5e25f7f720f.png"}),(0,a.kt)("h2",g({},{id:"emulate-devices"}),"Emulate devices"),(0,a.kt)("p",null,"Record scripts and tests while emulating a mobile device using the ",(0,a.kt)("inlineCode",{parentName:"p"},"--device")," option which sets the viewport size and user agent among others."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),'playwright codegen --device="iPhone 11" playwright.dev\n')),(0,a.kt)("img",{width:"1239",alt:"Codegen generating code for tests for playwright.dev website emulated for iPhone 11",src:"https://user-images.githubusercontent.com/13063165/182360089-9dc6d33d-480e-4bb2-86a3-fec51c1c228e.png"}),(0,a.kt)("h2",g({},{id:"emulate-color-scheme"}),"Emulate color scheme"),(0,a.kt)("p",null,"Record scripts and tests while emulating the color scheme with the ",(0,a.kt)("inlineCode",{parentName:"p"},"--color-scheme")," option."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright codegen --color-scheme=dark playwright.dev\n")),(0,a.kt)("img",{width:"1258",alt:"Codegen generating code for tests for playwright.dev website in dark mode",src:"https://user-images.githubusercontent.com/13063165/182359371-0bb4a7a2-abbb-4f73-8550-d67e0101f0ad.png"}),(0,a.kt)("h2",g({},{id:"emulate-geolocation-language-and-timezone"}),"Emulate geolocation, language and timezone"),(0,a.kt)("p",null,"Record scripts and tests while emulating timezone, language & location using the ",(0,a.kt)("inlineCode",{parentName:"p"},"--timezone"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"--geolocation")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--lang"),' options. Once page opens, click the "show your location" icon at them bottom right corner of the map to see geolocation in action.'),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),'playwright codegen --timezone="Europe/Rome" --geolocation="41.890221,12.492348" --lang="it-IT" maps.google.com\n')),(0,a.kt)("img",{width:"1276",alt:"Codegen generating code for tests for google maps showing timezone, geoloation as Rome, Italy and in Italian language",src:"https://user-images.githubusercontent.com/13063165/182394434-73e1c2a8-767e-411a-94e4-0912c1c50ecc.png"}),(0,a.kt)("h2",g({},{id:"preserve-authenticated-state"}),"Preserve authenticated state"),(0,a.kt)("p",null,"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"codegen")," with ",(0,a.kt)("inlineCode",{parentName:"p"},"--save-storage")," to save ",(0,a.kt)("a",g({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies"}),"cookies")," and ",(0,a.kt)("a",g({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"}),"localStorage")," at the end of the session. This is useful to separately record an authentication step and reuse it later in the tests. "),(0,a.kt)("p",null,"After performing authentication and closing the browser, ",(0,a.kt)("inlineCode",{parentName:"p"},"auth.json")," will contain the storage state. "),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright codegen --save-storage=auth.json\n")),(0,a.kt)("img",{width:"1264",alt:"Screenshot 2022-08-03 at 13 28 02",src:"https://user-images.githubusercontent.com/13063165/182599605-df2fbd05-622b-4cd7-8a32-0abdfea7d38d.png"}),(0,a.kt)("p",null,"Run with ",(0,a.kt)("inlineCode",{parentName:"p"},"--load-storage")," to consume previously loaded storage. This way, all ",(0,a.kt)("a",g({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies"}),"cookies")," and ",(0,a.kt)("a",g({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"}),"localStorage")," will be restored, bringing most web apps to the authenticated state without the need to login again."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright codegen --load-storage=auth.json github.com/microsoft/playwright\n")),(0,a.kt)("img",{width:"1261",alt:"Screenshot 2022-08-03 at 13 33 40",src:"https://user-images.githubusercontent.com/13063165/182599680-05297b4e-c258-4416-8daa-b8637c1db120.png"}),(0,a.kt)("p",null,"Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"open")," command with ",(0,a.kt)("inlineCode",{parentName:"p"},"--load-storage")," to open the saved ",(0,a.kt)("inlineCode",{parentName:"p"},"auth.json"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-bash"}),"playwright open --load-storage=auth.json github.com/microsoft/playwright\n")),(0,a.kt)("h2",g({},{id:"record-using-custom-setup"}),"Record using custom setup"),(0,a.kt)("p",null,"If you would like to use codegen in some non-standard setup (for example, use ",(0,a.kt)("a",g({parentName:"p"},{href:"/python/docs/next/api/class-browsercontext#browser-context-route"}),"browser_context.route(url, handler, **kwargs)"),"), it is possible to call ",(0,a.kt)("a",g({parentName:"p"},{href:"/python/docs/next/api/class-page#page-pause"}),"page.pause()")," that will open a separate window with codegen controls."),(0,a.kt)(r.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"sync",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-py"}),"from playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    # Make sure to run headed.\n    browser = p.chromium.launch(headless=False)\n\n    # Setup context however you like.\n    context = browser.new_context() # Pass any options\n    context.route('**/*', lambda route: route.continue_())\n\n    # Pause the page, and start recording manually.\n    page = context.new_page()\n    page.pause()\n"))),(0,a.kt)(o.Z,{value:"async",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",g({parentName:"pre"},{className:"language-py"}),"import asyncio\nfrom playwright.async_api import async_playwright\n\nasync def main():\n    async with async_playwright() as p:\n        # Make sure to run headed.\n        browser = await p.chromium.launch(headless=False)\n\n        # Setup context however you like.\n        context = await browser.new_context() # Pass any options\n        await context.route('**/*', lambda route: route.continue_())\n\n        # Pause the page, and start recording manually.\n        page = await context.new_page()\n        await page.pause()\n\nasyncio.run(main())\n")))),(0,a.kt)("h2",g({},{id:"whats-next"}),"What's Next"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",g({parentName:"li"},{href:"/python/docs/next/trace-viewer"}),"See a trace of your tests"))))}v.isMDXComponent=!0}}]);